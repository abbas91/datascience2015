z <- 2*z
}
two = function (u) {
u <<- 2*u
z <<- 2*z
}
two(x)
z
z
?assign()
a = c(3,5,2,8,4,6,1,7,4,9)
sort(a)
order(a)
?order()
a
?order()
order(a)
Rprof()
invisible(powers1(a,4))
Rprof(NULL)
summaryRprof()
a = c(3,5,2,8,4,6,1,7,4,9)
Rprof()
invisible(powers1(a,4))
Rprof(NULL)
summaryRprof()
Rprof()
invisible(powers1(a,4))
?dyn.load()
?reshape()
?reshape2()
?reshape2()
install.packages("reshape2")
library(reshape2)
?reshape2()
library(reshape2)
?reshape2()
?melt()
?reshape()
tony = scan(file="C:/Users/mark.li/Desktop/tony.csv", sep="\t", what="character")
tony = as.list(tony)
tony[[1]]
tony[[1]][1]
tony[[2]]
dfx <- data.frame(
group = c(rep('A', 8), rep('B', 15), rep('C', 6)),
sex = sample(c("M", "F"), size = 29, replace = TRUE),
age = runif(n = 29, min = 18, max = 54))
dfx
?gsub()
install.packages("Rcpp")
library(Rcpp)
library(Rcpp)
install.packages("ggplot2")
library(ggplot2)
library(ggplot2)
qplot(carat, price, data = diamonds)
qplot(log(carat), log(price), data = diamonds)
qplot(carat, x*y*z, data = diamonds)
names(data)
names(diamonds)
qplot(carat, price, data = diamonds, colour = color)
qplot(carat, price, data = diamonds, shape = cut)
qplot(carat, price, data = diamonds, colour = color, geom = c("point", 'smooth'))
qplot(carat, price, data = diamonds, geom = c("point", 'smooth'))
data = diamonds[sample(nrow(diamonds), 100),]
qplot(carat, price, data = data, geom = c("point", 'smooth'))
qplot(carat, price, data = data, geom = c("point", 'smooth'), span = 0.2)
install.packages("mgcv")
install.packages("mgcv")
library(mgcv)
install.packages("nlme")
install.packages("nlme")
install.packages("mgcv")
library(mgcv)
library(mgcv)
qplot(carat, price, data = data, geom = c("point", 'smooth'), span = 0.2, method = 'gam', formula = y ~ s(x))
install.packages("Rcpp")
library(Rcpp)
install.packages("ggplot2")
library(ggplot2)
qplot(carat, price, data = data, geom = c("point", 'smooth'), span = 0.2, method = 'gam', formula = y ~ s(x))
qplot(carat, price, data = data, colour = color, geom = c("point", 'smooth'), span = 0.2, method = 'gam', formula = y ~ s(x))
qplot(carat, price, data = data, geom = c("point", 'smooth'), span = 0.2, method = 'gam', formula = y ~ s(x), colour = color)
qplot(carat, price, data = data, geom = c("point", 'smooth'), span = 0.2, method = 'gam', formula = y ~ s(x))
qplot(carat, data = diamonds, geom = 'density', colour = color)
qplot(carat, data = diamonds, geom = 'density', fill = color)
View(d)
install.packages("Rcpp")
library(Rcpp)
install.packages("ggplot2")
library(ggplot2)
install.packages("mgcv")
library(mgcv)
install.packages("nlme")
diamonds
set.seed(10)
data = diamonds[sample(nrow(diamonds), 100),]
names(diamonds)
qplot(carat, price, data = diamonds)
qplot(log(carat), log(price), data = diamonds)
install.packages("nlme")
qplot(carat, price, data = diamonds)
?sample
?runif()
m = runif(100,1,2)
num = sample(1:5, m, replace=T)
num
m
data
a = c(1,2,3,4,5,6,7)
?dplyr
?force
install.packages("XML")
library(XML)
theurl <- "file:///C:/Users/mark.li/Desktop/Turbine%20History.html"
tables <- readHTMLTable(theurl)
table.data <- unlist(tables)
tables[[1]]
?rep
rep(2,10,1)
rep(2,10)
rep(2,10, each = 1)
rep(c(2,3,4),10, each = 2)
TP1 <- c(rep(c(3,6,8),100,2))
TP1
TP1 <- rep(c(3,6,8),100,2)
TP1 <- rep(c(3,6,8),100,each = 2)
Tp2 <- rep(c(5,9,1),100,each = 2)
Tp3 <- rep(c(5,2,4),100,each = 2)
Tp4 <- rep(c(3,1,8),100,each = 2)
TP1 <- rep(c(0,6,8),100,each = 2)
Tp2 <- rep(c(5,0,1),100,each = 2)
Tp3 <- rep(c(0,2,4),100,each = 2)
Tp4 <- rep(c(3,0,8),100,each = 2)
Tp1 <- rep(c(0,6,8),100,each = 2)
rm(TP1)
Tp1-Tp2 <- ifelse(Tp1=0,0,1) * ifelse(Tp2=0,0,1)
?ifelse
ifelse(Tp2 = 0,0,1)
ifelse(Tp2 == 0,0,1)
Tp1-Tp2 <- ifelse(Tp1 == 0,0,1) * ifelse(Tp2 == 0,0,1)
Tp1.Tp2 <- ifelse(Tp1 == 0,0,1) * ifelse(Tp2 == 0,0,1)
Tp1.Tp2 <- ifelse(Tp1 == 0,0,1) * ifelse(Tp2 == 0,0,1)
Tp3.Tp2 <- ifelse(Tp3 == 0,0,1) * ifelse(Tp2 == 0,0,1)
Tp4.Tp2 <- ifelse(Tp4 == 0,0,1) * ifelse(Tp2 == 0,0,1)
Tp3.Tp4 <- ifelse(Tp3 == 0,0,1) * ifelse(Tp4 == 0,0,1)
Tp1.Tp4 <- ifelse(Tp1 == 0,0,1) * ifelse(Tp4 == 0,0,1)
x <- runif(1000, -5, 5)
y <- x + rnorm(1000) + 3
x2 <-req(1,1000)
x2 <-seq(1,1000)
x <- as.matrix(cbind(x2,x))
View(x)
x2 <-seq(1,1000,each = 0)
x2 <-seq(1,each = 1000)
?seq
x2 <-rep(1,1000)
x <- as.matrix(cbind(x2,x))
View(x)
rm(x)
x <- as.matrix(cbind(x2,x))
x <- runif(1000, -5, 5)
x <- as.matrix(cbind(x2,x))
View(x)
normal.equaltion <- function (x,y) {
theta <- (solve(t(x)%*%x))
%*%
(t(x)%*%y)
y.predict = t(theta)%*%x
x.list <- list(theta, y.predict)
return (x.list)
}
theta <- matrix()
normal.equaltion <- function (x,y) {
theta <- matrix()
y.predict <- matrix()
theta <- (solve(t(x)%*%x))
%*%
(t(x)%*%y)
y.predict = t(theta)%*%x
x.list <- list(theta, y.predict)
return (x.list)
}
?matrix
normal.equaltion <- function (x,y) {
theta <- vector()
y.predict <- vector()
theta <- (solve(t(x)%*%x))
%*%
(t(x)%*%y)
y.predict = t(theta)%*%x
x.list <- list(theta, y.predict)
return (x.list)
}
y <- as.matrix(x + rnorm(1000) + 3)
normal.equaltion <- function (x,y) {
theta <- vector()
y.predict <- vector()
theta <- (solve(t(x)%*%x))
%*%
(t(x)%*%y)
y.predict = t(theta)%*%x
x.list <- list(theta, y.predict)
return (x.list)
}
solve(t(x)%*%x)
t(x)%*%y
solve(t(x)%*%x)
%*%
(t(x)%*%y)
solve(t(x)%*%x)%*%(t(x)%*%y)
t(theta)%*%x
as.matrix(t(theta))%*%x
solve(t(x)%*%x)%*%(t(x)%*%y)
solve(t(x)%*%x)%*%t(x)%*%y
solve(t(x) %*% x) %*% (t(x)%*%y)
solve(t(x) %*% x) %*% (t(x) %*% y)
y <- (x + rnorm(1000) + 3)
View(y)
x <- runif(1000, -5, 5)
x2 <- rep(1,1000)
x <- as.matrix(cbind(x2,x))
y <- (x + rnorm(1000) + 3)
x <- runif(1000, -5, 5)
x2 <- rep(1,1000)
x1 <- as.matrix(cbind(x2,x))
y <- (x + rnorm(1000) + 3)
solve(t(x1) %*% x1) %*% (t(x1) %*% y)
t(theta)%*%1x
theta <- solve(t(x1) %*% x1) %*% (t(x1) %*% y)
y.predict = t(theta) %*% 1x
predict = t(theta) %*% 1x
predict <- t(theta) %*% 1x
predict <- t(theta) %*% x1
theta <- as.matrix(solve(t(x1) %*% x1) %*% (t(x1) %*% y))
predict <- t(theta) %*% x1
View(theta)
t(theta)
View(`x1`)
x1 %*% theta
predict <- x1 %*% theta
v <- lm(y~x1)
v$coefficients
theta
x <- runif(1000, -5, 5)
x2 <- rep(1,1000)
x1 <- as.matrix(cbind(x2,x))
y <- (x + rnorm(1000) + 3)
normal.equaltion <- function (x,y) {
theta <- vector()
y.predict <- vector()
theta <- as.matrix(solve(t(x1) %*% x1) %*% (t(x1) %*% y))
predict <- x1 %*% theta
x.list <- list(theta, predict)
return (x.list)
}
x <- runif(1000, -5, 5)
x2 <- rep(1,1000)
x1 <- as.matrix(cbind(x2,x))
y <- (x + rnorm(1000) + 3)
normal.equaltion(x1,y)
normal.equaltion <- function (x,y) {
theta <- vector()
y.predict <- vector()
theta <- as.matrix(solve(t(x1) %*% x1) %*% (t(x1) %*% y))
predict <- x1 %*% theta
x.list <- list(theta, predict)
}
x <- runif(1000, -5, 5)
x2 <- rep(1,1000)
x1 <- as.matrix(cbind(x2,x))
y <- (x + rnorm(1000) + 3)
a <- normal.equaltion(x1,y)
a$theta
a$x.list
normal.equaltion <- function (x,y) {
theta <- vector()
y.predict <- vector()
theta <- as.matrix(solve(t(x1) %*% x1) %*% (t(x1) %*% y))
predict <- x1 %*% theta
x.list <- list(theta, predict)
return (x.list)
}
a <- normal.equaltion(x1,y)
a$x.list[[1]]
normal.equaltion(x1,y)
a$x.list
a <- normal.equaltion(x1,y)
a
class(a)
a[[1]]
?double
double(10)
double(5)
cost <- function (x,y,theta) {
sum(y %*% log((exp(x %*% theta)) / (1 + exp(x %*% theta)))
+ (1 - y) %*% log(1 - ((exp(x %*% theta)) / (1 + exp(x %*% theta)))))
* -(1/length(y))
}
cost <- function (x,y,theta) {
sum(y %*% log((exp(x %*% theta)) / (1 + exp(x %*% theta)))
+ (1 - y) %*% log(1 - ((exp(x %*% theta)) / (1 + exp(x %*% theta)))))
* (-(1/length(y)))
}
cost <- function (x,y,theta) {
sum(y %*% log((exp(x %*% theta)) / (1 + exp(x %*% theta)))
+ (1 - y) %*% log(1 - ((exp(x %*% theta)) / (1 + exp(x %*% theta)))))
* (-(1/length(y)))
}
cost <- function (x,y,theta) {
sum(y %*% log((exp(x %*% theta)) / (1 + exp(x %*% theta)))
+ (1 - y) %*% log(1 - ((exp(x %*% theta)) / (1 + exp(x %*% theta))))) * (-(1/length(y)))
}
?glm()
a <- 1:10
a
a <- 1L
a
class(a)
a <- c(1L,2L)
class(a)
a <- as.matrix(a)
class(a)
a
a <- as.vector(a)
class(a)
a <- as.numeric(a)
class(a)
a
sttributes(a)
attributes(a)
a <- as.matrix(a)
attributes(a)
?unclass
?readLine
?readLines
?source
y <- data.frame(a = 1, b = "a")
dput(y)
?dput
a <- dput(y)
a
y
?dump
?dput
?dump
y <- data.frame(a = 1, b = "a")
dput(y, file = "y.R")
rm(y)
y
source("y.R")
y
add <- c(1,2,3,4,4)
sdd <- c(3,4,5,6,7)
s <- data.frame(cbind(add,sdd))
s$a
s["a"]
s["a", exact = F]
s$d
s$s
add * sdd
add %*% sdd
warning(paste0("Seat: ", seat_id, " exported completely."))
seat_id <- 1662
warning(paste0("Seat: ", seat_id, " exported completely."))
install.packages('devtools')
library(devtools)
devtools::install_github('rstudio/rsconnect')
sessionInfo()
library(shinyapps)
object.size(z)
a <- c(1,2,3,4,5)
b <- c(2,3,4,5,6)
z <- cbind(a, b)
object.size(z)
install.packages("Matrix")
library(Matrix)
Z <- Matrix(z, sparse = TRUE)
object.size(Z)
a <- c(1,2,3,4,5)
b <- c(0,0,0,0,0)
z <- cbind(a, b)
object.size(z)
Z <- Matrix(z, sparse = TRUE)
object.size(Z)
z <- as.matrix(cbind(a, b))
object.size(z)
Z <- Matrix(z, sparse = TRUE)
object.size(Z)
m1 <- matrix(0, nrow = 1000, ncol = 1000)
m2 <- Matrix(0, nrow = 1000, ncol = 1000, sparse = TRUE)
object.size(m1)
object.size(m2)
View(m1)
library(shiny)
setwd("C://Users//mark.li//Desktop//Code Books//R code//shiny app folder")
runApp("copilot_R")
runApp("copilot_R")
runApp("copilot_R")
library(httr)
## ------------------------- ##
# -------------------------- #
#    Data Loading code       #
# -------------------------- #
# Create empty container
auth.file <- vector()
data.all <- data.frame(integer(),
factor(),
factor(),
character(),
integer(),
character(),
integer(),
character(),
integer(),
character(),
integer(),
integer(),
integer(),
numeric(),
numeric(),
numeric())
# Authentication
writeLines("\n\n\n------------------ Initiate --------------------\n\n\n")
# for (i in 1:11) {
setwd("C://Users//mark.li//Desktop//Code Books") # --------------------- auth.js dir
url.auth <- "https://api.appnexus.com/auth"
url.call <- "https://api.appnexus.com/member"
url.report <- "https://api.appnexus.com/report"
# auth.file[i] <- paste0(i,"auth.js")
r <- POST(url.auth, body = upload_file("1auth.js"))
print.default("Authenticating the login credentials...")
print.default("Test server connection...")
stop_for_status(r)
r.status <- unlist(http_status(r))
print.default(paste0("Server Status: ",r.status))
# Token success
r.error <- as.vector(content(r)$response$error_code)
r.success <- c(content(r)$response$token, content(r)$response$status)
ifelse(is.null(r.error) == T, paste0("Token: ",content(r)$response$token, " ---- Status: ", content(r)$response$status), r.error)
# Active token
print.default("Activating Token by loging in...")
r2 <- GET(url.call)
stop_for_status(r2)
print.default("Report Information loading...")
seat_id <- content(r2)$response$member$id
print.default(paste0("Report Status: ",content(r2)$response$status))
print.default(paste0("Seat_ID: ",content(r2)$response$member$id))
print.default(paste0("Seat_Name: ", content(r2)$response$member$name))
# Get report id
setwd("C://Users//mark.li//Desktop//Code Books") # --------------------------- report_request.js dir
print.default("Retrieving data based on 'Report.js'...")
r3 <- POST(url.report, body = upload_file("report_request.js"))
stop_for_status(r3)
print.default(paste0("Report Building Process Status: ",content(r3)$response$status))
report_id <- content(r3)$response$report_id
# Check report status
setwd("C://Users//mark.li//Desktop//Code Books") # --------------------------- data.input dir
print.default("Checking downloading status...")
url.check <- paste0('https://api.appnexus.com/report?id=',report_id)
url.download <- paste0('https://api.appnexus.com/report-download?id=',report_id)
repeat {
r4 <- GET(url.check)
stop_for_status(r4)
status <- content(r4)$response$execution_status
print.default(paste0("Report Status: ", status))
if (status == 'ready') {
break
}
}
print.default("Done - Downloading...")
print.default(paste0("Report Status: ", content(r4)$response$execution_status,
" ---- Row Count: ", content(r4)$response$report$row_count,
" ---- Report Size: ", content(r4)$response$report$row_count))
r.download <- GET(url.download)
print.default("Writing data to local...")
writeBin(as.vector(r.download[[6]]), "data.input.csv", useBytes=TRUE)
print.default("Reading data back to R...")
data.raw.i <- read.csv("data.input.csv", header = T, sep = ",", stringsAsFactors = FALSE)
print.default("Deleting local file...")
if (file.exists("data.input.csv")) file.remove("data.input.csv")
print.default("Deleting R objects...")
rm(r, r2, r3, r4, r.download,
r.error, r.status, r.success, report_id, status,
url.auth, url.call, url.check,
url.download, url.report)
# -------------------------- #
#        Data ETL code       #
# -------------------------- #
setwd("C://Users//mark.li//Desktop//Code Books") # --------------------------- data.output dir
print.default("Creating Seat_ID, IO_Type, Lineitem_Type...")
Seat_ID <- rep(seat_id,nrow(data.raw.i))
IO_Type <- as.matrix(unique(ifelse(grepl('-cp$',data.raw.i$line_item_name, ignore.case = T),data.raw.i$insertion_order_name, "Manual_IO")))
filter <- IO_Type[IO_Type != "Manual_IO"]
IO_Type <- ifelse(data.raw.i$insertion_order_name %in% filter, "Copilot_IO", "Manual_IO")
lineitem_Type <-ifelse(!grepl('-cp$',data.raw.i$line_item_name, ignore.case = T),"Manual",
ifelse(grepl('DEV',data.raw.i$line_item_name, ignore.case = F),"Dev-cp", "Pro-cp"))
print.default("Adding those features...")
unique(ifelse(grepl('-cp$', data.raw.i$line_item_name, ignore.case = T), data.raw.i$line_item_name, "NA"))
data.raw.i <- cbind(Seat_ID, IO_Type, lineitem_Type, data.raw.i)
install.packages("dplyr")
library(dplyr)
group <- group_by(data.raw.i, Seat_ID, IO_Type)
u <- summarize(group, IMPs = sum(IMPs))
u <- summarize(group, IMPs = sum(imps))
View(u)
library(shiny)
setwd("C://Users//mark.li//Desktop//Code Books//R code//shiny app folder")
runApp("copilot_R")
setwd("C://Users//mark.li//Desktop//Code Books//R code//shiny app folder")
runApp("copilot_R")
